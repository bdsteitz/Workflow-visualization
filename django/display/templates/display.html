{% extends "base.html" %}

{% load staticfiles %}

{% block content %}
	<table border="0" width="100%" height="25px">
	<tr>
		<td bgcolor="#92160D"><center><font color="#FFF">Exam</font></center></td>
		<td bgcolor="#CD820D"><center><font color="#FFF">Con#</font></center></td>
		<td bgcolor="#3A8408"><center><font color="#FFF">MM#</font></center></td>
		<td bgcolor="#04376F"><center><font color="#FFF">Stereo</font></center></td>
		<td bgcolor="#3E046F"><center><font color="#FFF">Infusion</font></center></td>
		<td bgcolor="#666231"><center><font color="#FFF">DR</font></center></td>
		<td bgcolor="#550000"><center><font color="#FFF">US</font></center></td>
		<td bgcolor="#003D00"><center><font color="#FFF">UBX</font></center></td>
		<td bgcolor="#3D4557"><center><font color="#FFF">I-Lab/INF-Exam</font></center></td>
		<td bgcolor="#008B8B"><center><font color="#FFF">Intake</font></center></td>
		<td bgcolor="#000000"><center><font color="#FFF">Waiting Room</font></center></td>
		<td bgcolor="#63FA20"><center><font color="#000">O</font></center></td>
		<td bgcolor="#E820FA"><center><font color="#000">A</font></center></td>
		<td bgcolor="#0000FF"><center><font color="#000">P</font></center></td>
		<td bgcolor="#FAF720"><center><font color="#000">D</font></center></td>
		<td bgcolor="#FF3333"><center><font color="#000">R</font></center></td>
		<td bgcolor="#20FAD4"><center><font color="#000">C</font></center></td>
		<td bgcolor="#9932CC"><center><font color="#000">S</font></center></td>
		<td bgcolor="#FFFFFF"><center><font color="#000">X</font></center></td>
		<td bgcolor="#1E90FF"><center><font color="#000">H</font></center></td>
	</tr>
</table>
    <div style="z-index:-10;" id='viz' name='viz'>
    </div>
{% endblock %}

{% block right_content %}

{% endblock %}

{% block extra_js %}

	<script>

	$(document).ready(function() {
		//Add Task Start Time and Date, End Time and Date, Name, and Status
		//Sample Below
		///*var tasks = [

		//Task 1
		//{"startDate":new Date("Thurs Jun 12 13:54:00 EST 2014"),"endDate":new Date("Thurs Jun 12 13:58:00 EST 2014"),"taskName":"Task 1","status":"Wait"},

		var tasks = {{ tasks | safe }};

		var taskStatus = {
			"O" : "O-Flag",
			"A" : "A-Flag",
			"P" : "P-Flag",
			"D" : "D-Flag",
			"R" : "R-Flag",
			"C" : "C-Flag",
			"S"	: "S-Flag",
			"X" : "X-Flag",
		    "Exam" : "exam",
		    "Con" : "Consult",
		    "MM" : "Mammography",
		    "Wait" : "Waiting",
		    "Inf" : "Infusion",
		    "DR" : "DR",
		    "US" : "US",
		    "UBX" : "UBX",
		    "Stereo" : "Stereo",
		    "Intake" : "Intake",
		    "I" : "I-Extra"
		};

		//Add Tasks for Y-Axis of Gantt
		var taskNames = {{ patients | safe}};

		tasks.sort(function(a, b) {
		    return a.endDate - b.endDate;
		});
		var maxDate = tasks[tasks.length - 1].endDate;

		tasks.sort(function(a, b) {
		    return a.startDate - b.startDate;
		});
		var minDate = tasks[0].startDate;

		var format = "%H:%M";

		var gantt = d3.gantt().taskTypes(taskNames).taskStatus(taskStatus).tickFormat(format);
		gantt(tasks);
	});

	</script>

{% endblock %}


